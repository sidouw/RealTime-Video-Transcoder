(this["webpackJsonpstreaming-client"]=this["webpackJsonpstreaming-client"]||[]).push([[0],{140:function(e,t,n){},141:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(11),r=n.n(c),i=n(13),l=n(40),s=n(2),u=function(e){var t=e.metadata,n=e.onClicked;return Object(s.jsxs)("div",{className:"videoThumbnail",onClick:function(){return n(t.name)},children:[Object(s.jsx)("img",{alt:"thumbnail",src:t.thumbnailPath}),Object(s.jsxs)("span",{className:"videoThumbnail__duration",children:[~~(t.duration%3600/60),":",~~t.duration%60]}),Object(s.jsx)("p",{children:t.name})]})},d=n(63),j=n.n(d),b=n(64),f=n.n(b),h=n(170),m=n(65),O=n.n(m),p=n(175),x=n(7),g=n(176),v=n(179),y=n(177),S=n(68),C=n.n(S),k=n(69),w=n.n(k),I=n(72),T=n.n(I),N=n(71),F=n.n(N),z=n(70),D=n.n(z),M=n(181),R=n(182),P=n(174),E=n(74),A=n.n(E),B=n(75),U=n.n(B),W=n(73),L=n.n(W),V=n(76),G=n.n(V),J=n(178),X=Object(h.a)((function(e){return{controlsWrapper:{visibility:"hidden",position:"absolute",top:0,left:0,right:0,bottom:0,height:"100%",background:"rgba(0,0,0,0.6)",display:"flex",flexDirection:"column",justifyContent:"space-between"},button:{margin:e.spacing(1)},controlIcons:{color:"#777",fontSize:50,transform:"scale(0.9)","&:hover":{color:"#fff",transform:"scale(1)"}},bottomIcons:{color:"#999","&:hover":{color:"#fff"}},volumeSlider:{width:100}}})),_=Object(x.a)({root:{height:8},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}})(M.a);function q(e){var t=e.children,n=e.open,a=e.value;return Object(s.jsx)(R.a,{open:n,enterTouchDelay:0,placement:"top",title:a,children:t})}var H=Object(a.forwardRef)((function(e,t){var n=e.onSeek,o=e.onSeekMouseDown,c=e.onSeekMouseUp,r=e.onRewind,u=e.onPlayPause,d=e.onFastForward,j=e.playing,b=e.played,f=e.elapsedTime,h=e.totalDuration,m=e.onMute,O=e.muted,x=e.onVolumeSeekDown,S=e.onChangeDispayFormat,k=e.playbackRate,I=e.onPlaybackRateChange,N=e.onToggleFullScreen,z=e.volume,R=e.onVolumeChange,E=e.onAddSubtitle,B=e.onOffsetSub,W=e.OffsetSub,V=e.title,H=e.audioTracks,$=e.onAudioTrackChange,K=X(),Q=Object(a.useState)(null),Y=Object(i.a)(Q,2),Z=Y[0],ee=Y[1],te=Object(a.useState)(null),ne=Object(i.a)(te,2),ae=ne[0],oe=ne[1],ce=Object(a.useState)(null),re=Object(i.a)(ce,2),ie=re[0],le=re[1],se=function(){ee(null),oe(null),le(null)},ue=Boolean(Z),de=Boolean(ae),je=Boolean(ie),be=ue?"simple-popover":void 0;return Object(s.jsx)("div",{ref:t,className:K.controlsWrapper,children:Object(s.jsxs)(P.a,{container:!0,direction:"column",justify:"space-between",style:{flexGrow:1},children:[Object(s.jsxs)(P.a,{container:!0,direction:"row",alignItems:"center",justify:"space-between",style:{padding:16},children:[Object(s.jsx)(P.a,{item:!0,children:Object(s.jsx)(p.a,{variant:"h5",style:{color:"#fff"},children:V})}),Object(s.jsxs)(P.a,{item:!0,children:[Object(s.jsx)("input",{id:"subtitle-input",onChange:E,type:"file",style:{display:"none"}}),Object(s.jsx)(g.a,{onClick:function(e){oe(e.currentTarget)},variant:"contained",color:"primary",startIcon:Object(s.jsx)(C.a,{}),children:"Subtitles"}),Object(s.jsx)(J.a,{container:t.current,open:de,onClose:se,anchorEl:ae,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{horizontal:"center"},children:Object(s.jsxs)(P.a,{container:!0,direction:"column",children:[Object(s.jsx)(g.a,{onClick:function(){return document.getElementById("subtitle-input").click()},variant:"text",children:Object(s.jsx)(p.a,{variant:"h8",style:{color:"#000"},children:"Add Subtitle"})}),Object(s.jsx)(v.a,{placeholder:"Offset",value:W,onChange:B,type:"Number",style:{width:"130px"}})]})})]})]}),Object(s.jsxs)(P.a,{container:!0,direction:"row",alignItems:"center",justify:"center",children:[Object(s.jsx)(y.a,{onClick:r,className:K.controlIcons,"aria-label":"rewind",children:Object(s.jsx)(w.a,{className:K.controlIcons,fontSize:"inherit"})}),Object(s.jsx)(y.a,{onClick:u,className:K.controlIcons,"aria-label":"play",children:j?Object(s.jsx)(D.a,{fontSize:"inherit"}):Object(s.jsx)(F.a,{fontSize:"inherit"})}),Object(s.jsx)(y.a,{onClick:d,className:K.controlIcons,"aria-label":"forward",children:Object(s.jsx)(T.a,{fontSize:"inherit"})})]}),Object(s.jsxs)(P.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{padding:16},children:[Object(s.jsx)(P.a,{item:!0,xs:12,children:Object(s.jsx)(_,{min:0,max:100,ValueLabelComponent:function(e){return Object(s.jsx)(q,Object(l.a)(Object(l.a)({},e),{},{value:f}))},"aria-label":"custom thumb label",value:100*b,onChange:n,onMouseDown:o,onChangeCommitted:c})}),Object(s.jsx)(P.a,{item:!0,children:Object(s.jsxs)(P.a,{container:!0,alignItems:"center",children:[Object(s.jsx)(y.a,{onClick:m,className:"".concat(K.bottomIcons," ").concat(K.volumeButton),children:O?Object(s.jsx)(L.a,{fontSize:"large"}):z>.5?Object(s.jsx)(A.a,{fontSize:"large"}):Object(s.jsx)(U.a,{fontSize:"large"})}),Object(s.jsx)(M.a,{min:0,max:100,value:O?0:100*z,onChange:R,"aria-labelledby":"input-slider",className:K.volumeSlider,onMouseDown:o,onChangeCommitted:x}),Object(s.jsx)(g.a,{variant:"text",onClick:S,children:Object(s.jsxs)(p.a,{variant:"body1",style:{color:"#fff",marginLeft:16},children:[f,"/",h]})})]})}),Object(s.jsxs)(P.a,{item:!0,children:[Object(s.jsx)(g.a,{onClick:function(e){le(e.currentTarget)},"aria-describedby":be,className:K.bottomIcons,variant:"text",children:Object(s.jsx)(p.a,{children:"audio"})}),Object(s.jsx)(J.a,{container:t.current,open:je,id:be,onClose:se,anchorEl:ie,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},children:Object(s.jsx)(P.a,{container:!0,direction:"column-reverse",children:H.map((function(e,t){return Object(s.jsx)(g.a,{onClick:function(){return $(t)},variant:"text",children:e},e)}))})}),Object(s.jsx)(g.a,{onClick:function(e){ee(e.currentTarget)},"aria-describedby":be,className:K.bottomIcons,variant:"text",children:Object(s.jsxs)(p.a,{children:[k,"X"]})}),Object(s.jsx)(J.a,{container:t.current,open:ue,id:be,onClose:se,anchorEl:Z,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},children:Object(s.jsx)(P.a,{container:!0,direction:"column-reverse",children:[.5,1,1.5,2].map((function(e){return Object(s.jsx)(g.a,{onClick:function(){return I(e)},variant:"text",children:Object(s.jsxs)(p.a,{color:e===k?"secondary":"inherit",children:[e,"X"]})},e)}))})}),Object(s.jsx)(y.a,{onClick:N,className:K.bottomIcons,children:Object(s.jsx)(G.a,{fontSize:"large"})})]})]})]})})})),$=n(27),K=n.n($),Q=Object(h.a)((function(e){return{playerWrapper:{width:"100%",position:"relative"},controlsWrapper:{visibility:"hidden",position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",justifyContent:"space-between"},topControls:{display:"flex",justifyContent:"flex-end",padding:e.spacing(2)},middleControls:{display:"flex",alignItems:"center",justifyContent:"center"},bottomWrapper:{display:"flex",flexDirection:"column",padding:e.spacing(2)},bottomControls:{display:"flex",alignItems:"center",justifyContent:"space-between"},button:{margin:e.spacing(1)},controlIcons:{color:"#777",fontSize:50,transform:"scale(0.9)","&:hover":{color:"#fff",transform:"scale(1)"}},bottomIcons:{color:"#999","&:hover":{color:"#fff"}},volumeSlider:{width:100}}})),Y=function(e){if(isNaN(e))return"00:00";var t=new Date(1e3*e),n=t.getUTCHours(),a=t.getUTCMinutes(),o=t.getUTCSeconds().toString().padStart(2,"0");return n?"".concat(n,":").concat(a.toString().padStart(2,"0"),":").concat(o):"".concat(a,":").concat(o)},Z=0,ee=function(e){var t=e.setOpened,n=e.opened,o=e.currentlyPlaying,c=e.currentMetadata,r=Q(),l=Object(a.useState)(0),u=Object(i.a)(l,2),d=u[0],b=u[1],h=Object(a.useState)("normal"),m=Object(i.a)(h,2),p=m[0],x=m[1],g=Object(a.useState)(!0),v=Object(i.a)(g,2),y=v[0],S=v[1],C=Object(a.useState)(!1),k=Object(i.a)(C,2),w=k[0],I=k[1],T=Object(a.useState)(0),N=Object(i.a)(T,2),F=N[0],z=N[1],D=Object(a.useState)(1),M=Object(i.a)(D,2),R=M[0],P=M[1],E=Object(a.useState)(1),A=Object(i.a)(E,2),B=A[0],U=A[1],W=Object(a.useState)(0),L=Object(i.a)(W,2),V=L[0],G=L[1],J=Object(a.useState)(0),X=Object(i.a)(J,2),_=X[0],q=X[1],$=Object(a.useState)(!1),ee=Object(i.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useRef)(null),oe=Object(a.useRef)(null),ce=Object(a.useRef)(null);Object(a.useEffect)((function(){b(0),z(0)}),[o]);var re=ae&&ae.current?ae.current.getCurrentTime()+d:"00:00",ie=c?c.duration:"00:00",le="normal"===p?Y(re):"-".concat(Y(ie-re)),se=Y(ie);return Object(s.jsx)(f.a,{className:"player-modal",overlayClassName:"modal-Overlay",isOpen:n,onRequestClose:function(){return t(!n)},appElement:document.getElementById("root"),closeTimeoutMS:200,children:Object(s.jsxs)("div",{onMouseMove:function(){ce.current.style.visibility="visible",Z=0},onMouseLeave:function(){ce.current.style.visibility="hidden",Z=0},ref:oe,className:r.playerWrapper,children:[Object(s.jsx)(j.a,{ref:ae,width:"100%",height:"100%",url:"/video/video?seek=".concat(d,"&play=").concat(o,"&subOffset=").concat(V,"&audioTrack=").concat(_),playing:y,controls:!1,light:!1,loop:!1,playbackRate:R,volume:B,muted:w,onProgress:function(e){Z>3&&(ce.current.style.visibility="hidden",Z=0),"visible"===ce.current.style.visibility&&(Z+=1),te||z((e.playedSeconds+d)/parseFloat(c.duration))}}),Object(s.jsx)(H,{ref:ce,title:c.name,onSeek:function(e,t){z(parseFloat(t/100))},onSeekMouseDown:function(e){ne(!0)},onSeekMouseUp:function(e,t){b(parseInt(c.duration*(t/100))),ne(!1)},onRewind:function(){var e=F*parseFloat(c.duration)-10;b(e),z(e)},onPlayPause:function(){S(!y)},onFastForward:function(){var e=F*parseFloat(c.duration)+10;b(e),z(e)},playing:y,played:F,OffsetSub:V,onAddSubtitle:function(e){var t=e.target.files[0],n=new FileReader;n.readAsText(t),n.onloadend=function(){K.a.post("video/subs",{sub:n.result,name:c.name}).then((function(e){console.log(e.data),b(F*parseFloat(c.duration)-1)})).catch((function(){}))}},elapsedTime:le,totalDuration:se,onMute:function(){I(!w)},muted:w,onVolumeChange:function(e,t){U(parseFloat(t/100)),I(0===t)},onVolumeSeekDown:function(e,t){ne(!1),U(parseFloat(t/100))},onChangeDispayFormat:function(){x("normal"===p?"remaining":"normal")},playbackRate:R,onPlaybackRateChange:function(e){P(e)},onAudioTrackChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;q(e),b(F*parseFloat(c.duration)-1)},onToggleFullScreen:function(){O.a.toggle(oe.current)},volume:B,onOffsetSub:function(e){b(F*parseFloat(c.duration)-1),G(e.target.value)},audioTracks:Boolean(c.audioTracks)?c.audioTracks:[]})]})})},te=function(){return Object(s.jsx)("header",{className:"header",children:Object(s.jsx)("h2",{children:"Stream Page"})})},ne=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!1),r=Object(i.a)(c,2),d=r[0],j=r[1],b=Object(a.useState)(""),f=Object(i.a)(b,2),h=f[0],m=f[1],O=Object(a.useState)({}),p=Object(i.a)(O,2),x=p[0],g=p[1];Object(a.useEffect)((function(){K.a.get("video/metadata").then((function(e){e.data.success||console.log(e.data.error);var t=e.data.metadata.sort((function(e,t){var n=e.name.toUpperCase(),a=t.name.toUpperCase();return n<a?-1:n>a?1:0}));console.log(e.data),console.log(e),o(t)})).catch((function(e){console.log(e)}))}),[]);var v=function(e){var t=n.find((function(t){return t.name===e}));g(Object(l.a)({},t)),m(encodeURIComponent(e)),j(!0)};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(te,{}),Object(s.jsxs)("div",{className:"videosGrid",children:[n.map((function(e,t){return Object(s.jsx)(u,{onClicked:v,metadata:e},t)})),Object(s.jsx)(ee,{opened:d,setOpened:j,currentlyPlaying:h,currentMetadata:x})]})]})},ae=function(e){var t=e.setAuthed;return Object(s.jsx)("div",{className:"authContainer",children:Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),K.a.post("/auth",{passworrd:e.target[0].value}).then((function(e){e.data?t(!0):alert("Wrong Password")})).catch((function(){}))},children:[Object(s.jsx)("h1",{children:"Password"}),Object(s.jsx)("input",{type:"text"}),Object(s.jsx)("button",{children:"Confirm"})]})})},oe=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){K.a.post("/auth",{password:""}).then((function(e){o(e.data)})).catch((function(e){}))}),[]),Object(s.jsx)(s.Fragment,{children:n?Object(s.jsx)(ne,{}):Object(s.jsx)(ae,{setAuthed:o})})};n(140);r.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(oe,{})}),document.getElementById("root"))}},[[141,1,2]]]);
//# sourceMappingURL=main.b44b7014.chunk.js.map